<!DOCTYPE html>
<html>
<head>
<link rel= "stylesheet" href="style.css">
<meta charset="ISO-8859-1">
<title>pendingRequests</title>
</head>
<script>
function viewPendingReimbursements() {
let xhttp = new XMLHttpRequest();
	
	xhttp.onreadystatechange = function() {
		console.log(this.readyState);
		if(xhttp.readyState === 4 && xhttp.status === 200) {
			let Data = JSON.parse(xhttp.responseText);
		        var table = document.getElementById("myDynamicTable");
		        
		        table.border='1';
		       
		        
		        var tableBody = document.createElement('TBODY');
		        table.appendChild(tableBody);
		        for (var i=0; i<Data.length; i++){
		           var tr = document.createElement('TR');
		           tableBody.appendChild(tr);
		          
		               var td1 = document.createElement('TD');
		               td1.width='75';
		               td1.appendChild(document.createTextNode(Data[i].amount));
		               tr.appendChild(td1);
		               var td2 = document.createElement('TD');
		               td2.width='75';
		               td2.appendChild(document.createTextNode(Data[i].description));
		               tr.appendChild(td2);
		               var td3 = document.createElement('TD');
		               td3.width='75';
		               td3.appendChild(document.createTextNode(Data[i].submitted));
		               tr.appendChild(td3);
		               var td4 = document.createElement('TD');
		               td4.width='75';
		               if(Data[i].type === 1){
		            	   temp="Vacation";
		               }
		            	if(Data[i].type === 2){
		            		temp = "Office";
		            	}
		            	if(Data[i].type === 3){
		    	       		temp = "Damages";
		            	}
		               td4.appendChild(document.createTextNode(temp));
		               tr.appendChild(td4);
		               
		               var btn = document.createElement('BUTTON');
		               btn.innerHTML="Resolve";
		               btn.addEventListener ("click", function go() {
		            	    document.getElementById("demo").innerHTML = "hello";
		               });
		               
		               var td6 = document.createElement('TD');
		               td6.width='75';
		               td6.appendChild(btn);
		               tr.appendChild(td6);
		        }
		}
	}
	xhttp.open("POST", "ViewPendingReimbursements", true);
	xhttp.send();
}



</script>

<body onload="viewPendingReimbursements()">
	<header>
		<div>
			<div>
				<h1>
					Welcome to the Employee Reimbursement Management System
				</h1>
			</div>
			<nav>
				<ul>
					<li><a href="managerHomepage.html">Home</a></li>
					<li><a href="pendingRequests.html">Pending Requests</a></li>
					<li><a href="resolvedRequests.html">Resolved Requests</a></li>
					<li><a href="employees.html">Employees</a></li>
					<li><a href="index.html">Logout</a></li>
				</ul>
			</nav>
		</div>
	</header>
	</br>
	<table id ="myDynamicTable">
	</table>
</body>
</html>